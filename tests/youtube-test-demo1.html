<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚¤ãƒ³ã‚¿ãƒãƒƒãƒˆæ¥ç¶š - ì•ˆì •ì ì¸ ë²„ì „</title>
<link rel="stylesheet" href="common-layout2.css">
<style>
  .video-container {
   display: flex;
   flex-direction: row;
   justify-content: center; 
   align-items: center;
   gap: 20px;
   margin-top: 50px;
  }
  
  .video-wrapper {
    position: relative;
    width: 360px;
    height: 215px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    border-radius: 8px;
    overflow: hidden;
  }
  
  .video-wrapper iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  
  .status {
   margin-top: 10px;
   font-size: 15px;
  }
  
  audio {
   display: none;
  }
</style>
</head>

<body>
<h1>
  <div class="header-left-group">
    <a href="../index.html" class="header-home-btn">ãƒ›ãƒ¼ãƒ </a>
    <a href="summary.html" class="header-home-btn" style="margin-left:5px;">çµæœã¾ã¨ã‚</a>
  </div>
  <span class="title-link">ã‚¤ãƒ³ã‚¿ãƒãƒƒãƒˆãƒ»ãƒ†ã‚¹ãƒˆ</span>
</h1>

<div class="video-container">
  <div class="video-wrapper">
    <iframe 
      src="https://www.youtube.com/embed/1u6fRer9oVw" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
      allowfullscreen>
    </iframe>
  </div>
</div>

<div class="status">
  <p>â€ å‹•ç”»ãŒ20ç§’ä»¥ä¸Šã€å†ç”Ÿã§ãã‚Œã°OK</p>
  <p>â å†ç”Ÿä¸­ã«ã€è¼åº¦ã¨éŸ³é‡ãƒ†ã‚¹ãƒˆã‚‚ã—ã¦ãƒ</p>
</div>

<a href="https://youtu.be/1u6fRer9oVw" target="_blank">
  YoutubeãŒãŒå‡ºã¦æ¥ãªã„å ´åˆã¯ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯
</a>

<div class="nav-buttons">
  <button class="nav-button" onclick="playAndNavigate('sound-previous', 'whitespot-test.html')">â¬… å‰ã®ãƒ†ã‚¹ãƒˆ</button>
  <button class="nav-button" onclick="playAndNavigate('sound-home', '../index.html')">ğŸ  ãƒ›ãƒ¼ãƒ </button>
  <button class="nav-button" onclick="playAndNavigate('sound-next', 'touchscreen-test.html')">æ¬¡ã®ãƒ†ã‚¹ãƒˆ â¡</button>
</div>

<audio id="sound-previous" src="../media/audio/previous-button-sound.mp3" preload="auto"></audio>
<audio id="sound-home" src="../media/audio/home-button-sound.mp3" preload="auto"></audio>
<audio id="sound-next" src="../media/audio/next-button-sound.mp3" preload="auto"></audio>

<div class="nav-buttons">
  <div class="nav-left">
    <button onclick="playAndNavigate('sound-previous', 'whitespot-test.html')">â¬… å‰ã®ãƒ†ã‚¹ãƒˆ</button>
  </div>
  <div class="nav-center">
    <button class="button button3">ä¸åˆæ ¼</button>
    <button class="button button2">åˆ¤å®šä¿ç•™</button>
    <button class="button button1">åˆæ ¼</button>
  </div>
  <div class="nav-right">
    <button onclick="playAndNavigate('sound-next', 'touchscreen-test.html')">æ¬¡ã®ãƒ†ã‚¹ãƒˆ â¡</button>
  </div>
</div>

<script>
  /**
   * ì‚¬ìš´ë“œ ì¬ìƒ í›„ ì§€ì •ëœ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
   * @param {string} soundId - ì¬ìƒí•  audio ìš”ì†Œì˜ ID
   * @param {string} nextPage - ì´ë™í•  í˜ì´ì§€ URL
   */
  function playAndNavigate(soundId, nextPage) {
    const audio = document.getElementById(soundId);
    if (!audio) {
      location.href = nextPage;
      return;
    }
    audio.currentTime = 0;
    audio.play().then(() => {
      setTimeout(() => { location.href = nextPage; }, 400);
    }).catch(() => {
      location.href = nextPage;
    });
  }

  /**
   * í•˜ë‹¨ 'í•©ê²©/ë¶ˆí•©ê²©' ë²„íŠ¼ì˜ ìƒíƒœë¥¼ ì„¤ì •í•˜ê³  localStorageì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
   */
  function setBottomToggleButtons() {
    const testKey = 'ã‚¤ãƒ³ã‚¿ãƒãƒƒãƒˆæ¥ç¶š';
    const storageKey = 'testResult_' + testKey;
    const btns = document.querySelectorAll('.nav-center .button');

    const saved = localStorage.getItem(storageKey);
    btns.forEach(btn => {
      if (btn.textContent === saved) {
        btn.classList.add('selected');
      } else {
        btn.classList.remove('selected');
      }
    });

    btns.forEach(btn => {
      btn.addEventListener('click', function() {
        if (this.classList.contains('selected')) {
          this.classList.remove('selected');
          localStorage.removeItem(storageKey);
          return;
        }
        btns.forEach(b => b.classList.remove('selected'));
        this.classList.add('selected');
        localStorage.setItem(storageKey, this.textContent);
      });
    });
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
  document.addEventListener('DOMContentLoaded', () => {
    setBottomToggleButtons();
  });
</script>
</body>
</html>
