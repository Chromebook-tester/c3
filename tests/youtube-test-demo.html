<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>👻Test Title👻</title>
  <link rel="stylesheet" href="common-layout2.css">

  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      padding: 40px;
      text-align: center;
    }

    .video-container {
      display: flex;
      flex-direction: row;
      justify-content: center; 
      align-items: center;
      gap: 20px;
      margin-top: 50px;
    }

    .video-container iframe {
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    }

    iframe {
      width: 360px;
      height: 215px;
      border: none;
    }

    .status {
      margin-top: 10px;
      font-size: 15px;
    }

    audio {
      display: none;
    }
  </style>
</head>

<body>

  <h1>
    <div class="header-left-group">
      <a href="../index.html" class="header-home-btn">ホーム</a>
      <a href="summary.html" class="header-home-btn" style="margin-left:5px;">結果まとめ</a>
    </div>
    <span class="title-link">👻Test Title👻</span>
  </h1>

  <div class="video-container">
    <div id="player1"></div>
  </div>

  <div class="status">
    <p>➀ 動画が20秒以上、再生できればOK</p>
    <p>➁ 再生中に、輝度と音量テストもしてネ🐱</p>
  </div>

  <div class="nav-buttons">
    <button class="nav-button" onclick="playAndNavigate('sound-previous', 'whitespot-test.html')">⬅ 前のテスト</button>
    <button class="nav-button" onclick="playAndNavigate('sound-home', '../index.html')">🏠 ホーム</button>
    <button class="nav-button" onclick="playAndNavigate('sound-next', 'touchscreen-test.html')">次のテスト ➡</button>
  </div>

  <!-- 오디오 효과 -->
  <audio id="sound-previous" src="../media/audio/previous-button-sound.mp3" preload="auto"></audio>
  <audio id="sound-home" src="../media/audio/home-button-sound.mp3" preload="auto"></audio>
  <audio id="sound-next" src="../media/audio/next-button-sound.mp3" preload="auto"></audio>

  <!-- 버튼 토글 -->
  <div class="nav-buttons">
    <div class="nav-left">
      <button onclick="playAndNavigate('sound-previous', 'whitespot-test.html')">⬅ 前のテスト</button>
    </div>
    <div class="nav-center">
      <button class="button button3">不合格</button>
      <button class="button button2">気になる</button>
      <button class="button button1">合格</button>
    </div>
    <div class="nav-right">
      <button onclick="playAndNavigate('sound-next', 'touchpad-test.html')">次のテスト ➡</button>
    </div>
  </div>

  <!-- YouTube API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player1;

    function onYouTubeIframeAPIReady() {
      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        createYouTubePlayer();
      } else {
        window.addEventListener('DOMContentLoaded', createYouTubePlayer);
      }
    }

    function createYouTubePlayer() {
      const playerEl = document.getElementById('player1');
      if (playerEl) {
        player1 = new YT.Player('player1', {
          height: '215',
          width: '360',
          videoId: 'rYrInAtoNZc',
          playerVars: {
            'autoplay': 0,
            'controls': 1,
            'rel': 0
          }
        });
      }
    }

    window.addEventListener('pageshow', (event) => {
      if (event.persisted) {
        location.reload();
      }
    });
  </script>

  <!-- 네비게이션 오디오 및 버튼 선택 토글 -->
  <script>
    function playAndNavigate(soundId, nextPage) {
      const audio = document.getElementById(soundId);
      if (!audio) {
        location.href = nextPage;
        return;
      }

      audio.currentTime = 0;
      audio.play().then(() => {
        setTimeout(() => {
          location.href = nextPage;
        }, 400);
      }).catch(() => {
        location.href = nextPage;
      });
    }

    function setBottomToggleButtons() {
      document.querySelectorAll('.nav-center .button').forEach(btn => {
        btn.addEventListener('click', function() {
          if (this.classList.contains('selected')) {
            this.classList.remove('selected');
            return;
          }
          document.querySelectorAll('.nav-center .button').forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
        });
      });
    }

    window.addEventListener('DOMContentLoaded', setBottomToggleButtons);
  </script>

</body>
</html>
